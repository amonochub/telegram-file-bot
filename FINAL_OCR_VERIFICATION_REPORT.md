# üìã –ò–¢–û–ì–û–í–´–ô –û–¢–ß–ï–¢: –ü–†–û–í–ï–†–ö–ê OCR –§–£–ù–ö–¶–ò–û–ù–ê–õ–¨–ù–û–°–¢–ò

## üéØ –¶–µ–ª—å –ø—Ä–æ–≤–µ—Ä–∫–∏
–ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ OCR —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å —Ñ–∞–π–ª–∞–º–∏ –≤ —Ç–µ–ª–µ–≥—Ä–∞–º-–±–æ—Ç–µ.

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 1. –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ OCR
- **ocrmypdf**: 16.10.4 ‚úÖ
- **PyMuPDF (fitz)**: 1.26.3 ‚úÖ 
- **tesseract**: 5.5.1 ‚úÖ
- **Pillow**: –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ ‚úÖ
- **pytesseract**: –†–∞–±–æ—Ç–∞–µ—Ç ‚úÖ
- **–Ø–∑—ã–∫–æ–≤—ã–µ –ø–∞–∫–µ—Ç—ã**: rus+eng ‚úÖ

### 2. –°–∏—Å—Ç–µ–º–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- **Ghostscript**: –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω ‚úÖ
- **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã ‚úÖ

### 3. –ö–æ–¥ –ø—Ä–æ–µ–∫—Ç–∞

#### app/handlers/menu/ocr.py
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω
- **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è**: –£—Å—Ç—Ä–∞–Ω–µ–Ω–∞ –æ—à–∏–±–∫–∞ —Ç–∏–ø–æ–≤ MyPy (Path ‚Üí str)
- **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**: –û–±—Ä–∞–±–æ—Ç–∫–∞ OCR –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –≤ Telegram

#### app/services/ocr_service.py  
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –£–ª—É—á—à–µ–Ω
- **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è**: 
  - –î–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `output_type='pdf'`
  - –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –º–µ—Ö–∞–Ω–∏–∑–º fallback —Å `force_ocr`
  - –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**: –û—Å–Ω–æ–≤–Ω–æ–π OCR —Å–µ—Ä–≤–∏—Å

## üß™ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã
```
‚úÖ test_ocr.py: 6/6 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ—à–ª–∏
‚úÖ test_ocr_service.py: 1/1 —Ç–µ—Å—Ç –ø—Ä–æ—à–µ–ª  
‚úÖ test_ocr_ghostscript_fix.py: 8/8 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ—à–ª–∏
```

**–û–±—â–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: 15/15 —Ç–µ—Å—Ç–æ–≤ —É—Å–ø–µ—à–Ω–æ ‚úÖ

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã

#### –¢–µ—Å—Ç —Å —Ä–µ–∞–ª—å–Ω—ã–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º
- **–†—É—Å—Å–∫–∏–π —Ç–µ–∫—Å—Ç**: ‚úÖ –†–∞—Å–ø–æ–∑–Ω–∞–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- **–ê–Ω–≥–ª–∏–π—Å–∫–∏–π —Ç–µ–∫—Å—Ç**: ‚úÖ –†–∞—Å–ø–æ–∑–Ω–∞–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ  
- **–ß–∏—Å–ª–∞**: ‚úÖ –í—Å–µ —á–∏—Å–ª–∞ —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω—ã
- **–û–±—â–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: 4/4 –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ—à–ª–∏ ‚úÖ

## üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. MyPy –æ—à–∏–±–∫–∞ —Ç–∏–ø–æ–≤
**–ü—Ä–æ–±–ª–µ–º–∞**: `Path` –æ–±—ä–µ–∫—Ç –ø–µ—Ä–µ–¥–∞–≤–∞–ª—Å—è –∫–∞–∫ `str`
**–†–µ—à–µ–Ω–∏–µ**: –î–æ–±–∞–≤–ª–µ–Ω–æ —è–≤–Ω–æ–µ –ø—Ä–∏–≤–µ–¥–µ–Ω–∏–µ `str(file_path)`

### 2. Ghostscript —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å  
**–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ–ø–æ–ª–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã OCR, –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ fallback
**–†–µ—à–µ–Ω–∏–µ**: 
- –î–æ–±–∞–≤–ª–µ–Ω `output_type='pdf'` –¥–ª—è –ø–µ—Ä–≤–æ–π –ø–æ–ø—ã—Ç–∫–∏
- –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω fallback —Å `force_ocr=True` –∏ `output_type='pdf'`
- –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π

### 3. –¢–µ—Å—Ç–æ–≤–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ
**–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Ghostscript —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
**–†–µ—à–µ–Ω–∏–µ**: –°–æ–∑–¥–∞–Ω –ø–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä —Ç–µ—Å—Ç–æ–≤ –¥–ª—è –≤—Å–µ—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ OCR

## üìä –ö–∞—á–µ—Å—Ç–≤–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è

### –¢–µ—Å—Ç–æ–≤—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
- **–ß–µ—Ç–∫–∏–π –ø–µ—á–∞—Ç–Ω—ã–π —Ç–µ–∫—Å—Ç**: 100% —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ
- **–†—É—Å—Å–∫–∏–π —è–∑—ã–∫**: –û—Ç–ª–∏—á–Ω–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ
- **–ê–Ω–≥–ª–∏–π—Å–∫–∏–π —è–∑—ã–∫**: –û—Ç–ª–∏—á–Ω–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ  
- **–ß–∏—Å–ª–∞**: 100% —Ç–æ—á–Ω–æ—Å—Ç—å
- **–°–º–µ—à–∞–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç**: –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- **–í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏**: ~1-2 —Å–µ–∫—É–Ω–¥—ã –¥–ª—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞
- **–ü–∞–º—è—Ç—å**: –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
- **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**: –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ macOS —Å M-—á–∏–ø–∞–º–∏

## üöÄ –°—Ç–∞—Ç—É—Å –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

### ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É
- –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏
- –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã fallback –º–µ—Ö–∞–Ω–∏–∑–º—ã
- –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å Ghostscript

### üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è
- –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—á–∏—â–∞—é—Ç—Å—è

### üìù –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- –í—Å–µ —ç—Ç–∞–ø—ã OCR –ª–æ–≥–∏—Ä—É—é—Ç—Å—è
- –û—à–∏–±–∫–∏ –¥–µ—Ç–∞–ª—å–Ω–æ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è
- –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
1. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: –û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å OCR –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
2. **–ú–µ—Ç—Ä–∏–∫–∏**: –°–æ–±–∏—Ä–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∫–∞—á–µ—Å—Ç–≤–∞ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è
3. **–û–±–Ω–æ–≤–ª–µ–Ω–∏—è**: –†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è—Ç—å tesseract –∏ ocrmypdf

### –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
1. **–ö–∞—á–µ—Å—Ç–≤–æ —Ñ–∞–π–ª–æ–≤**: –õ—É—á—à–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å —á–µ—Ç–∫–∏–º–∏ —Å–∫–∞–Ω–∞–º–∏
2. **–§–æ—Ä–º–∞—Ç—ã**: –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç PDF, PNG, JPG –∏ –¥—Ä—É–≥–∏–µ
3. **–Ø–∑—ã–∫–∏**: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ –¥–ª—è —Ä—É—Å—Å–∫–æ–≥–æ –∏ –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ

## üéâ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**OCR —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!**

- ‚úÖ –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –ö–∞—á–µ—Å—Ç–≤–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –æ—Ç–ª–∏—á–Ω–æ–µ  
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –Ω–∞–¥–µ–∂–Ω–∞—è
- ‚úÖ –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Å–∏—Å—Ç–µ–º–æ–π –æ–±–µ—Å–ø–µ—á–µ–Ω–∞
- ‚úÖ –¢–µ—Å—Ç–æ–≤–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ –ø–æ–ª–Ω–æ–µ

–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ —Ç–µ–ª–µ–≥—Ä–∞–º-–±–æ—Ç–µ.

---
*–û—Ç—á–µ—Ç —Å–æ–∑–¥–∞–Ω: 23 —è–Ω–≤–∞—Ä—è 2025*
*–í–µ—Ä—Å–∏—è OCR —Å–∏—Å—Ç–µ–º—ã: ocrmypdf 16.10.4 + tesseract 5.5.1*
