
# Telegram File Bot (Yandex.Disk + Gemini)

## –û–ø–∏—Å–∞–Ω–∏–µ
–ë–æ—Ç –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏, —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —Å —Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –Ω–∞ –Ø–Ω–¥–µ–∫—Å.–î–∏—Å–∫–µ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π AI (Gemini).

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### üì§ –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ø–∞–ø–æ–∫ –ø–æ –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–∞
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∞—Ä—Ö–∏–≤–æ–≤ –∏ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
- –•—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞ –Ø–Ω–¥–µ–∫—Å.–î–∏—Å–∫–µ —Å –ø—Ä—è–º—ã–º–∏ —Å—Å—ã–ª–∫–∞–º–∏

### ü§ñ –ò–ò-–ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- **–õ–æ–∫–∞–ª—å–Ω—ã–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏**: IBAN/SWIFT, –Ω–æ–º–µ—Ä–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, –¥–∞—Ç—ã, —Å—É–º–º—ã
- **–ò–ò-–∞–Ω–∞–ª–∏–∑**: —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å —Ä—É—Å—Å–∫–æ–π/–∞–Ω–≥–ª–∏–π—Å–∫–æ–π –≤–µ—Ä—Å–∏–π —á–µ—Ä–µ–∑ Gemini
- **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã**: PDF, DOCX, DOC
- **–î–µ—Ç–∞–ª—å–Ω—ã–µ –æ—Ç—á–µ—Ç—ã**: –æ—à–∏–±–∫–∏ + –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –ò–ò

### üßæ OCR —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ
- –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –∏–∑ PDF
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–≥–æ—è–∑—ã—á–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ–≤–æ–¥ –∞–Ω–≥–ª–∏–π—Å–∫–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

### üí∞ –†–∞—Å—á—ë—Ç –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á—ë—Ç –∫–æ–º–∏—Å—Å–∏–π
- –£—á—ë—Ç –∫—É—Ä—Å–æ–≤ –≤–∞–ª—é—Ç
- –ì–æ—Ç–æ–≤—ã–µ –æ—Ç—á—ë—Ç—ã

### üìà –ö—É—Ä—Å—ã –¶–ë
- –ü–æ–ª—É—á–µ–Ω–∏–µ –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö –∫—É—Ä—Å–æ–≤
- –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ Redis

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ `.env.example` –≤ `.env` –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:
   - `BOT_TOKEN` ‚Äî —Ç–æ–∫–µ–Ω Telegram-–±–æ—Ç–∞
   - `ALLOWED_USER_ID` ‚Äî –≤–∞—à Telegram user ID
   - `YANDEX_DISK_TOKEN` ‚Äî OAuth-—Ç–æ–∫–µ–Ω –Ø–Ω–¥–µ–∫—Å.–î–∏—Å–∫–∞
   - `GEMINI_API_KEY` ‚Äî API-–∫–ª—é—á Google Gemini (–¥–ª—è –ò–ò-–ø—Ä–æ–≤–µ—Ä–∫–∏)
   - `REDIS_URL` ‚Äî —Å—Ç—Ä–æ–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Redis
   - `LOG_LEVEL` ‚Äî —É—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

2. –°–æ–±–µ—Ä–∏—Ç–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã:
   ```bash
   docker-compose up --build
   ```

3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:
   ```bash
   docker-compose logs -f bot
   ```

## –ò–ò-–ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

### –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
1. –ù–∞–∂–º–∏—Ç–µ "ü§ñ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ò–ò" –≤ –≥–ª–∞–≤–Ω–æ–º –º–µ–Ω—é
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ PDF –∏–ª–∏ DOCX –¥–æ–∫—É–º–µ–Ω—Ç
3. –ü–æ–ª—É—á–∏—Ç–µ –¥–µ—Ç–∞–ª—å–Ω—ã–π –æ—Ç—á—ë—Ç —Å –æ—à–∏–±–∫–∞–º–∏ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏ –ò–ò

### –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è
- **–õ–æ–∫–∞–ª—å–Ω–æ**: IBAN/SWIFT –∫–æ–¥—ã, –Ω–æ–º–µ—Ä–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, –¥–∞—Ç—ã, —Å—É–º–º—ã
- **–ò–ò**: —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –≤–µ—Ä—Å–∏–π, —é—Ä–∏–¥–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏, –ø–æ–ª–Ω–æ—Ç–∞ –¥–∞–Ω–Ω—ã—Ö

### –ü—Ä–∏–º–µ—Ä –æ—Ç—á—ë—Ç–∞
```
üîç –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–æ–≤–µ—Ä–∫–∏

‚õî –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π IBAN: TR21 0004 –≤–≤–≤ 7603‚Ä¶
‚ö†Ô∏è –ù–æ–º–µ—Ä –≤ —Ñ–∞–π–ª–µ (1) –Ω–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å –Ω–æ–º–µ—Ä–æ–º –≤ –∏–º–µ–Ω–∏ (54)

ü§ñ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –ò–ò
–°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –≤–µ—Ä—Å–∏–π:
‚Ä¢ –†–µ–∫–æ–º–µ–Ω–¥—É—é –∑–∞–º–µ–Ω–∏—Ç—å –±–ª–æ–∫ 'IBAN'‚Ä¶
‚Ä¢ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–∞—Ç—É –ø–æ–¥–ø–∏—Å–∏‚Ä¶

–û–±—â–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è:
‚Ä¢ –î–æ–∫—É–º–µ–Ω—Ç —Å–æ—Å—Ç–∞–≤–ª–µ–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
‚Ä¢ –í—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω—ã
   ```

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å Docker

- **–°–µ–∫—Ä–µ—Ç—ã (—Ç–æ–∫–µ–Ω—ã, –ø–∞—Ä–æ–ª–∏) –Ω–µ –¥–æ–ª–∂–Ω—ã –ø–æ–ø–∞–¥–∞—Ç—å –≤ Dockerfile!**
- –í—Å–µ —Å–µ–∫—Ä–µ—Ç—ã –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ `.env` –∏ `docker-compose.yml`.
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–µ–ø—Ä–∏–≤–∏–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (`USER app`).
- –î–æ–±–∞–≤–ª–µ–Ω `.dockerignore` –¥–ª—è —É–º–µ–Ω—å—à–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞ –æ–±—Ä–∞–∑–∞ –∏ –∑–∞—â–∏—Ç—ã —Å–µ–∫—Ä–µ—Ç–æ–≤.

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–º. `.env.example` –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
drive_bot_final/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ main.py
‚îÇ   ‚îú‚îÄ‚îÄ config.py
‚îÇ   ‚îú‚îÄ‚îÄ handlers/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ menu/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ ai_verification.py    # –ò–ò-–ø—Ä–æ–≤–µ—Ä–∫–∞
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ upload.py             # –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ gemini_service.py         # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Gemini
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ yandex_disk_service.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ocr_service.py
‚îÇ   ‚îî‚îÄ‚îÄ utils/
‚îÇ       ‚îú‚îÄ‚îÄ file_text_extractor.py    # –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞
‚îÇ       ‚îú‚îÄ‚îÄ validators.py             # –õ–æ–∫–∞–ª—å–Ω—ã–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
‚îÇ       ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ tests/
‚îú‚îÄ‚îÄ docker-compose.yml
‚îú‚îÄ‚îÄ requirements.txt
‚îú‚îÄ‚îÄ .env.example
‚îú‚îÄ‚îÄ README.md
‚îú‚îÄ‚îÄ AI_VERIFICATION_GUIDE.md          # –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –ò–ò-–ø—Ä–æ–≤–µ—Ä–∫–µ
‚îî‚îÄ‚îÄ ...
```

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏
- –•—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –Ω–∞ –Ø–Ω–¥–µ–∫—Å.–î–∏—Å–∫–µ
- –ò–ò-–∞–Ω–∞–ª–∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —á–µ—Ä–µ–∑ Gemini
- –õ–æ–∫–∞–ª—å–Ω—ã–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ + –ò–ò-–ø—Ä–æ–≤–µ—Ä–∫–∞
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞, FSM wizard, OCR
- Redis –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
- –ü–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏
- Production-ready Docker Compose

## –õ–∏—Ü–µ–Ω–∑–∏—è
MIT

---

# –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ (–±–µ–∑ Docker)

–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞ –Ω–∞–ø—Ä—è–º—É—é –Ω–∞ —Å–≤–æ–µ–π —Å–∏—Å—Ç–µ–º–µ (macOS –∏–ª–∏ Linux), –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:

## 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

### macOS (Homebrew):
```bash
brew install redis tesseract poppler libmagic
brew services start redis  # –ó–∞–ø—É—Å–∫ Redis –≤ —Ñ–æ–Ω–µ
```

### Linux (apt):
```bash
sudo apt update
sudo apt install redis-server tesseract-ocr poppler-utils libmagic1 libmagic-dev python3-venv build-essential -y
sudo service redis-server start  # –ó–∞–ø—É—Å–∫ Redis
```

## 2. –°–æ–∑–¥–∞–π—Ç–µ –∏ –∞–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
```bash
python3 -m venv .venv
source .venv/bin/activate
```

## 3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```bash
pip install -r requirements.txt
```

## 4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```bash
cp .env.example .env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env —Ñ–∞–π–ª
```

## 5. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞
```bash
python3 -m app.main
```

## –ò–ò-–ø—Ä–æ–≤–µ—Ä–∫–∞ (–ª–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫)

–î–ª—è —Ä–∞–±–æ—Ç—ã –ò–ò-–ø—Ä–æ–≤–µ—Ä–∫–∏ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ:
1. –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω `GEMINI_API_KEY` –≤ `.env`
2. –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: `google-generativeai`, `python-docx`, `pymupdf`
3. –ï—Å—Ç—å –¥–æ—Å—Ç—É–ø –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É –¥–ª—è API Gemini

–ü–æ–¥—Ä–æ–±–Ω–µ–µ —Å–º. `AI_VERIFICATION_GUIDE.md`
