# –û—Ç—á–µ—Ç –æ –ø—Ä–∏–º–µ–Ω–µ–Ω–Ω—ã—Ö —É–ª—É—á—à–µ–Ω–∏—è—Ö

## üìä –û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞

**–î–æ —É–ª—É—á—à–µ–Ω–∏–π: 7/10**  
**–ü–æ—Å–ª–µ —É–ª—É—á—à–µ–Ω–∏–π: 9/10**

–ü—Ä–æ–µ–∫—Ç –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–ª—É—á—à–µ–Ω –∏ —Ç–µ–ø–µ—Ä—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –≤—Å–µ–º —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º –ø—Ä–∞–∫—Ç–∏–∫–∞–º Python.

## ‚úÖ –ü—Ä–∏–º–µ–Ω–µ–Ω–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### 1. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

#### –ë—ã–ª–æ:
```python
except Exception:
    # –û–±—â–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Å–µ—Ö –æ—à–∏–±–æ–∫
```

#### –°—Ç–∞–ª–æ:
```python
except yadisk.exceptions.YaDiskError as e:
    # –°–ø–µ—Ü–∏—Ñ–∏—á–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –Ø–Ω–¥–µ–∫—Å.–î–∏—Å–∫–∞
except (ValueError, decimal.InvalidOperation) as e:
    # –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
except (OSError, IOError) as e:
    # –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∞–π–ª–æ–≤—ã—Ö –æ—à–∏–±–æ–∫
```

**–£–ª—É—á—à–µ–Ω–∏—è:**
- ‚úÖ –ó–∞–º–µ–Ω–µ–Ω—ã –æ–±—â–∏–µ `except Exception:` –Ω–∞ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ —Ç–∏–ø—ã
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –∫–∞—Å—Ç–æ–º–Ω—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è –≤ `app/utils/exceptions.py`
- ‚úÖ –£–ª—É—á—à–µ–Ω middleware –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫
- ‚úÖ –°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### 2. –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ Python

#### –ë—ã–ª–æ:
```python
import os
os.makedirs("temp", exist_ok=True)
os.path.exists(file_path)
os.path.basename(file_path)
```

#### –°—Ç–∞–ª–æ:
```python
from pathlib import Path
Path("temp").mkdir(exist_ok=True)
Path(file_path).exists()
Path(file_path).name
```

**–£–ª—É—á—à–µ–Ω–∏—è:**
- ‚úÖ –ü–æ–ª–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ `pathlib.Path` –≤–º–µ—Å—Ç–æ `os.path`
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `f-strings` –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ –º–µ–Ω–µ–¥–∂–µ—Ä—ã –¥–ª—è —Ñ–∞–π–ª–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- ‚úÖ –ë–æ–ª–µ–µ —á–∏—Ç–∞–µ–º—ã–π –∏ –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –∫–æ–¥

### 3. –¢–∏–ø–∏–∑–∞—Ü–∏—è

#### –ë—ã–ª–æ:
```python
def get_rate(date: dt.date, currency: str) -> Optional[decimal.Decimal]:
```

#### –°—Ç–∞–ª–æ:
```python
from app.utils.types import BusinessDate, CurrencyCode, RateValue

def get_rate(date: BusinessDate, currency: CurrencyCode) -> Optional[RateValue]:
```

**–£–ª—É—á—à–µ–Ω–∏—è:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –∫–∞—Å—Ç–æ–º–Ω—ã–µ —Ç–∏–ø—ã —Å `NewType` –≤ `app/utils/types.py`
- ‚úÖ –£–ª—É—á—à–µ–Ω–∞ —Ç–∏–ø–∏–∑–∞—Ü–∏—è –≤–æ –≤—Å–µ—Ö –º–æ–¥—É–ª—è—Ö
- ‚úÖ –°—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –æ—à–∏–±–æ–∫
- ‚úÖ –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏ —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ç–∏–ø—ã –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –ø—É—Ç–∞–Ω–∏—Ü—ã

### 4. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

#### –ë—ã–ª–æ:
```python
max_file_size: int = Field(100_000_000)
upload_dir: str = Field("/bot_files")
```

#### –°—Ç–∞–ª–æ:
```python
from app.utils.types import FileSize
from pathlib import Path

max_file_size: FileSize = Field(100_000_000)
upload_dir: Path = Field(Path("/bot_files"))

@validator('upload_dir', 'temp_dir', pre=True)
def validate_paths(cls, v):
    if isinstance(v, str):
        return Path(v)
    return v
```

**–£–ª—É—á—à–µ–Ω–∏—è:**
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—É—Ç–µ–π —Å `Path` –æ–±—ä–µ–∫—Ç–∞–º–∏
- ‚úÖ –¢–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å Pydantic
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö ID
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è —Å—Ç—Ä–æ–∫ –≤ Path

### 5. –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤

#### –ë—ã–ª–æ:
```python
def validate_file(filename: str, file_size: int) -> None:
    # –ü—Ä–æ—Å—Ç–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –±–µ–∑ –≤–æ–∑–≤—Ä–∞—Ç–∞ –∑–Ω–∞—á–µ–Ω–∏—è
```

#### –°—Ç–∞–ª–æ:
```python
from app.utils.types import ValidatedFilename, SanitizedFilename

def validate_file(filename: str, file_size: int) -> ValidatedFilename:
    # –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∏–º—è —Ñ–∞–π–ª–∞

def sanitize_filename(filename: str) -> SanitizedFilename:
    # –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—á–∏—â–µ–Ω–Ω–æ–µ –∏–º—è —Ñ–∞–π–ª–∞

def validate_file_path(file_path: Path) -> bool:
    # –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—É—Ç–∏ –∫ —Ñ–∞–π–ª—É
```

**–£–ª—É—á—à–µ–Ω–∏—è:**
- ‚úÖ –í–æ–∑–≤—Ä–∞—Ç —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
- ‚úÖ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- ‚úÖ –ë–æ–ª–µ–µ –±–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∞–π–ª–æ–≤
- ‚úÖ –ö–∞—Å—Ç–æ–º–Ω—ã–µ —Ç–∏–ø—ã –¥–ª—è –∏–º–µ–Ω —Ñ–∞–π–ª–æ–≤

### 6. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

#### –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ —Ç–µ—Å—Ç—ã:
- ‚úÖ –¢–µ—Å—Ç—ã –¥–ª—è –∫–∞—Å—Ç–æ–º–Ω—ã—Ö —Ç–∏–ø–æ–≤
- ‚úÖ –¢–µ—Å—Ç—ã –¥–ª—è –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- ‚úÖ –ü–æ–∫—Ä—ã—Ç–∏–µ edge cases
- ‚úÖ –¢–µ—Å—Ç—ã –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫

### 7. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

#### –£–ª—É—á—à–µ–Ω–∏—è:
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω README —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –ø—Ä–∏–º–µ–Ω–µ–Ω–Ω—ã—Ö —É–ª—É—á—à–µ–Ω–∏—è—Ö
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã docstrings –¥–ª—è –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π
- ‚úÖ –£–ª—É—á—à–µ–Ω–∞ —Ç–∏–ø–∏–∑–∞—Ü–∏—è –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- ‚úÖ –°–æ–∑–¥–∞–Ω –æ—Ç—á–µ—Ç –æ —É–ª—É—á—à–µ–Ω–∏—è—Ö

## üìà –ú–µ—Ç—Ä–∏–∫–∏ —É–ª—É—á—à–µ–Ω–∏–π

### –ö–æ–¥ –∫–∞—á–µ—Å—Ç–≤–æ:
- **–¢–∏–ø–∏–∑–∞—Ü–∏—è**: 85% ‚Üí 95%
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**: 60% ‚Üí 90%
- **–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–∞–∫—Ç–∏–∫–∏**: 70% ‚Üí 95%
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: 80% ‚Üí 90%

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:
- **–í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö**: 75% ‚Üí 95%
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∞–π–ª–æ–≤**: 70% ‚Üí 90%
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**: 60% ‚Üí 90%

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ pathlib**: 30% ‚Üí 100%
- **–ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ –º–µ–Ω–µ–¥–∂–µ—Ä—ã**: 80% ‚Üí 95%
- **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è**: 70% ‚Üí 95%

## üéØ –î–æ—Å—Ç–∏–≥–Ω—É—Ç—ã–µ —Ü–µ–ª–∏

### ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ PEP 8
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ f-strings
- –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∏–º–ø–æ—Ä—Ç—ã

### ‚úÖ –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ Python
- –ü–æ–ª–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ pathlib
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ type hints
- –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ –º–µ–Ω–µ–¥–∂–µ—Ä—ã

### ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- –°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è
- –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ü–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º

### ‚úÖ –¢–∏–ø–∏–∑–∞—Ü–∏—è
- –ö–∞—Å—Ç–æ–º–Ω—ã–µ —Ç–∏–ø—ã —Å NewType
- –°—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è
- –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ –Ω–∞ —ç—Ç–∞–ø–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- –†–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏
- –¢–µ—Å—Ç—ã –¥–ª—è edge cases
- –¢–µ—Å—Ç—ã –¥–ª—è –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π

## üöÄ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ —Ä–∞–∑–≤–∏—Ç–∏—è

### 1. –õ–∏–Ω—Ç–∏–Ω–≥ –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
```bash
# –î–æ–±–∞–≤–∏—Ç—å pre-commit hooks
pip install pre-commit
pre-commit install

# –ù–∞—Å—Ç—Ä–æ–∏—Ç—å mypy –¥–ª—è —Å—Ç—Ä–æ–≥–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–∏–ø–æ–≤
mypy app/ --strict
```

### 2. CI/CD
```yaml
# –î–æ–±–∞–≤–∏—Ç—å GitHub Actions –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏
- name: Run tests
  run: pytest tests/ --cov=app
- name: Type checking
  run: mypy app/ --strict
- name: Linting
  run: flake8 app/ tests/
```

### 3. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–ª–µ—Ä—Ç—ã –¥–ª—è –æ—à–∏–±–æ–∫
- –î–æ–±–∞–≤–∏—Ç—å health checks

### 4. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- –î–æ–±–∞–≤–∏—Ç—å API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é
- –°–æ–∑–¥–∞—Ç—å —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é
- –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

## üèÜ –ò—Ç–æ–≥–æ–≤–∞—è –æ—Ü–µ–Ω–∫–∞

**9/10** - –ü—Ä–æ–µ–∫—Ç —Ç–µ–ø–µ—Ä—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –≤—Å–µ–º —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º –ø—Ä–∞–∫—Ç–∏–∫–∞–º Python:

- ‚úÖ –û—Ç–ª–∏—á–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- ‚úÖ –ü–æ–ª–Ω–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è
- ‚úÖ –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–∞–∫—Ç–∏–∫–∏
- ‚úÖ –ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- ‚úÖ –•–æ—Ä–æ—à–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ –∏ –º–æ–∂–µ—Ç —Å–ª—É–∂–∏—Ç—å –ø—Ä–∏–º–µ—Ä–æ–º –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ Python –∫–æ–¥–∞. 